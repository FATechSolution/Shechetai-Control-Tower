module.exports=[18622,(t,e,a)=>{e.exports=t.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(t,e,a)=>{e.exports=t.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(t,e,a)=>{e.exports=t.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(t,e,a)=>{e.exports=t.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},93695,(t,e,a)=>{e.exports=t.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},54799,(t,e,a)=>{e.exports=t.x("crypto",()=>require("crypto"))},59787,t=>{"use strict";var e=t.i(89171);class a extends Error{statusCode;code;constructor(t,e,a){super(e),this.statusCode=t,this.code=a,this.name="ApiError"}}function s(t,a){return e.NextResponse.json({success:!0,data:t,message:a})}function i(t,a=400){let s="string"==typeof t?t:t.message;return e.NextResponse.json({success:!1,error:s},{status:a})}function r(t){return(console.error("API Error:",t),t instanceof a)?i(t.message,t.statusCode):t instanceof Error?i(t.message,500):i("An unexpected error occurred",500)}function c(t){return{page:Math.max(1,parseInt(t.get("page")||"1",10)),limit:Math.min(100,Math.max(1,parseInt(t.get("limit")||"20",10)))}}function l(t,e,a,s){return{data:t,pagination:{page:a,limit:s,total:e,totalPages:Math.ceil(e/s)}}}async function n(t){try{let e=t.headers.get("content-type");if(!e||!e.includes("application/json"))return{};let a=await t.json();return"object"==typeof a?a:{}}catch(t){return console.error("Failed to parse JSON:",t),{}}}t.s(["createPaginatedResponse",()=>l,"errorResponse",()=>i,"handleApiError",()=>r,"parsePagination",()=>c,"safeParseJson",()=>n,"successResponse",()=>s])},12224,t=>t.a(async(e,a)=>{try{var s=t.i(707),i=e([s]);[s]=i.then?(await i)():i;class r{static db=(0,s.getFirebaseDb)();static async getAll(t){return(await this.db.collection(t).get()).docs.map(t=>({id:t.id,...t.data()}))}static async query(t,e){let a=this.db.collection(t);return e.forEach(t=>{a=a.where(t.field,t.op,t.value)}),(await a.get()).docs.map(t=>({id:t.id,...t.data()}))}static async getById(t,e){let a=await this.db.collection(t).doc(e).get();return a.exists?{id:a.id,...a.data()}:null}static async create(t,e){let a=Object.entries(e).reduce((t,[e,a])=>(void 0!==a&&(t[e]=a),t),{}),s=await this.db.collection(t).add({...a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),i=await s.get();return{id:i.id,...i.data()}}static async createWithId(t,e,a){let s=Object.entries(a).reduce((t,[e,a])=>(void 0!==a&&(t[e]=a),t),{});await this.db.collection(t).doc(e).set({...s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});let i=await this.db.collection(t).doc(e).get();return{id:i.id,...i.data()}}static async update(t,e,a){let s=this.db.collection(t).doc(e);if(!(await s.get()).exists)return null;let i=Object.entries(a).reduce((t,[e,a])=>(void 0!==a&&(t[e]=a),t),{});await s.update({...i,updatedAt:new Date().toISOString()});let r=await s.get();return{id:r.id,...r.data()}}static async delete(t,e){try{return await this.db.collection(t).doc(e).delete(),!0}catch(t){return console.error(`Error deleting document ${e}:`,t),!1}}static async getPaginated(t,e,a,s){let i=this.db.collection(t);s&&s.forEach(t=>{i=i.where(t.field,t.op,t.value)});let r=(await i.get()).size;return{items:(await i.offset(a).limit(e).get()).docs.map(t=>({id:t.id,...t.data()})),total:r}}}class c{static collection="agents";static async getAll(){return r.getAll(this.collection)}static async getById(t){return r.getById(this.collection,t)}static async getByTeam(t){return r.query(this.collection,[{field:"teamId",op:"==",value:t}])}static async create(t){return r.create(this.collection,t)}static async update(t,e){return r.update(this.collection,t,e)}static async delete(t){return r.delete(this.collection,t)}static async getAnalytics(t){return{agentId:t,totalRequests:0,successfulRequests:0,failedRequests:0,averageResponseTime:0,usageByDay:[]}}}class l{static collection="teams";static async getAll(){return r.getAll(this.collection)}static async getById(t){return r.getById(this.collection,t)}static async getByOwner(t){return r.query(this.collection,[{field:"ownerId",op:"==",value:t}])}static async create(t){return r.create(this.collection,t)}static async update(t,e){return r.update(this.collection,t,e)}static async delete(t){return r.delete(this.collection,t)}static async getAnalytics(t){return{teamId:t,totalAgents:0,activeAgents:0,totalMembers:0,seatUtilization:0,totalRequests:0,monthlySpend:0,activityLog:[]}}}class n{static collection="users";static async getAll(){return r.getAll(this.collection)}static async getById(t){return r.getById(this.collection,t)}static async getByEmail(t){let e=await r.query(this.collection,[{field:"email",op:"==",value:t}]);return e.length>0?e[0]:null}static async getByTeam(t){return r.query(this.collection,[{field:"teamId",op:"==",value:t}])}static async create(t,e){return r.createWithId(this.collection,t,e)}static async update(t,e){return r.update(this.collection,t,e)}static async delete(t){return r.delete(this.collection,t)}}class o{static collection="contracts";static async getAll(){return r.getAll(this.collection)}static async getById(t){return r.getById(this.collection,t)}static async getByTeam(t){return r.query(this.collection,[{field:"teamId",op:"==",value:t}])}static async getByTeamId(t){return this.getByTeam(t)}static async create(t){return r.create(this.collection,t)}static async update(t,e){return r.update(this.collection,t,e)}}class d{static collection="wallets";static db=(0,s.getFirebaseDb)();static async getAll(){return r.getAll(this.collection)}static async getById(t){return r.getById(this.collection,t)}static async getByTeamId(t){return this.getById(t)}static async getByEntity(t,e){if("team"===e)return this.getByTeamId(t);let a=await r.query(this.collection,[{field:"entityId",op:"==",value:t},{field:"entityType",op:"==",value:e}]);return a.length>0?a[0]:null}static async create(t){let e=t.teamId;if(!e)throw Error("teamId is required to create a wallet");let a={...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await this.db.collection(this.collection).doc(e).set(a);let s=await this.db.collection(this.collection).doc(e).get();return{id:s.id,walletId:s.id,...s.data()}}static async update(t,e){let a={...e,updatedAt:new Date().toISOString()};await this.db.collection(this.collection).doc(t).update(a);let s=await this.db.collection(this.collection).doc(t).get();return s.exists?{id:s.id,walletId:s.id,...s.data()}:null}static async updateBalance(t,e){let a=this.db.collection(this.collection).doc(t),s=await a.get();if(!s.exists)return null;let i=s.data()?.balance||0;await a.update({balance:i+e,updatedAt:new Date().toISOString()});let r=await a.get();return{id:r.id,walletId:r.id,...r.data()}}}class u{static collection="creditTransactions";static async getAll(){return r.getAll(this.collection)}static async getById(t){return r.getById(this.collection,t)}static async getByWallet(t){return r.query(this.collection,[{field:"walletId",op:"==",value:t}])}static async create(t){return r.create(this.collection,t)}}class g{static collection="subscriptionPlans";static async getAll(){return(await r.getAll(this.collection)).map(t=>({...t,planId:t.id}))}static async getActive(){return(await r.query(this.collection,[{field:"status",op:"==",value:"active"}])).map(t=>({...t,planId:t.id}))}static async getById(t){let e=await r.getById(this.collection,t);return e?{...e,planId:e.id}:null}static async create(t){let e=await r.create(this.collection,t);return{...e,planId:e.id}}static async update(t,e){let a=await r.update(this.collection,t,e);return a?{...a,planId:a.id}:null}}class y{static collection="subscriptions";static async getAll(){return(await r.getAll(this.collection)).map(t=>({...t,subscriptionId:t.id}))}static async getById(t){let e=await r.getById(this.collection,t);return e?{...e,subscriptionId:e.id}:null}static async getByUser(t){return(await r.query(this.collection,[{field:"userId",op:"==",value:t}])).map(t=>({...t,subscriptionId:t.id}))}static async getByTeamId(t){return(await r.query(this.collection,[{field:"teamId",op:"==",value:t}])).map(t=>({...t,subscriptionId:t.id}))}static async create(t){let e=await r.create(this.collection,t);return{...e,subscriptionId:e.id}}static async update(t,e){let a=await r.update(this.collection,t,e);return a?{...a,subscriptionId:a.id}:null}}class p{static collection="payment-methods";static async getByUser(t){return r.query(this.collection,[{field:"userId",op:"==",value:t}])}static async getById(t){return r.getById(this.collection,t)}static async create(t){return r.create(this.collection,t)}static async delete(t){return r.delete(this.collection,t)}static async setDefault(t){return r.update(this.collection,t,{isDefault:!0})}}class I{static collection="auditLogs";static async create(t){return r.create(this.collection,t)}static async getAll(t=100,e=0){return r.getPaginated(this.collection,t,e)}static async getByUser(t){return r.query(this.collection,[{field:"userId",op:"==",value:t}])}}class h{static collection="featureFlags";static async getAll(){return r.getAll(this.collection)}static async getById(t){return r.getById(this.collection,t)}static async create(t){return r.create(this.collection,t)}static async update(t,e){return r.update(this.collection,t,e)}static async delete(t){return r.delete(this.collection,t)}}class b{static collection="whiteLabelConfigs";static async getAll(){return(await r.getAll(this.collection)).map(t=>({...t,configId:t.id}))}static async getById(t){let e=await r.getById(this.collection,t);return e?{...e,configId:e.id}:null}static async getByTeamId(t){return(await r.query(this.collection,[{field:"teamId",op:"==",value:t}])).map(t=>({...t,configId:t.id}))}static async create(t){let e=await r.create(this.collection,t);return{...e,configId:e.id}}static async update(t,e){let a=await r.update(this.collection,t,e);return a?{...a,configId:a.id}:null}static async delete(t){return r.delete(this.collection,t)}}class m{static collection="referrals";static async getAll(){return(await r.getAll(this.collection)).map(t=>({...t,referralId:t.id}))}static async getById(t){let e=await r.getById(this.collection,t);return e?{...e,referralId:e.id}:null}static async getByReferrer(t){return(await r.query(this.collection,[{field:"referrerId",op:"==",value:t}])).map(t=>({...t,referralId:t.id}))}static async create(t){let e=await r.create(this.collection,t);return{...e,referralId:e.id}}static async update(t,e){let a=await r.update(this.collection,t,e);return a?{...a,referralId:a.id}:null}}class w{static collection="teamMembers";static async getAll(){return r.getAll(this.collection)}static async getByTeam(t){return r.query(this.collection,[{field:"teamId",op:"==",value:t}])}static async getById(t){return r.getById(this.collection,t)}static async create(t){return r.create(this.collection,t)}static async update(t,e){return r.update(this.collection,t,e)}static async delete(t){return r.delete(this.collection,t)}static async removeByUserAndTeam(t,e){let a=(0,s.getFirebaseDb)(),i=await a.collection(this.collection).where("teamId","==",t).where("userId","==",e).get();return!i.empty&&(await i.docs[0].ref.delete(),!0)}}class f{static collection="teamInvites";static async getAll(){return(await r.getAll(this.collection)).map(t=>({...t,inviteId:t.id}))}static async getByTeam(t){return(await r.query(this.collection,[{field:"teamId",op:"==",value:t}])).map(t=>({...t,inviteId:t.id}))}static async getByTeamId(t){return this.getByTeam(t)}static async getById(t){let e=await r.getById(this.collection,t);return e?{...e,inviteId:e.id}:null}static async create(t){let e=await r.create(this.collection,t);return{...e,inviteId:e.id}}static async update(t,e){return r.update(this.collection,t,e)}static async delete(t){return r.delete(this.collection,t)}}c.getAll,c.getById,c.create,c.update,c.delete,l.getAll,l.getById,l.create,l.update,l.delete,n.getAll,n.getById,n.create,n.update,n.delete,o.getAll,o.getById,o.create,o.update,d.getAll,d.getById,d.create,d.update,u.getAll,u.getById,u.create,b.getAll,b.getById,b.create,b.update,b.delete,m.getAll,m.getById,m.create,m.update,t.s(["AgentDatabase",()=>c,"AuditLogDatabase",()=>I,"ContractDatabase",()=>o,"FeatureFlagDatabase",()=>h,"PaymentMethodDatabase",()=>p,"PlanDatabase",()=>g,"ReferralDatabase",()=>m,"SubscriptionDatabase",()=>y,"TeamDatabase",()=>l,"TeamInviteDatabase",()=>f,"TeamMemberDatabase",()=>w,"TransactionDatabase",()=>u,"UserDatabase",()=>n,"WalletDatabase",()=>d,"WhiteLabelDatabase",()=>b]),a()}catch(t){a(t)}},!1),80935,t=>t.a(async(e,a)=>{try{var s=t.i(12224),i=e([s]);[s]=i.then?(await i)():i;let r={getAgents:async t=>{let e=await s.AgentDatabase.getAll();if(!t)return e;let a=e;if(t.teamId&&(a=a.filter(e=>e.teamId===t.teamId)),t.status&&(a=a.filter(e=>e.status===t.status)),t.search){let e=t.search.toLowerCase();a=a.filter(t=>t.agentId.toLowerCase().includes(e)||t.name.toLowerCase().includes(e))}return a},getAgent:t=>s.AgentDatabase.getById(t),getAgentById:t=>s.AgentDatabase.getById(t),createAgent:t=>s.AgentDatabase.create(t),updateAgent:(t,e)=>s.AgentDatabase.update(t,e),deleteAgent:t=>s.AgentDatabase.delete(t),getAgentAnalytics:t=>s.AgentDatabase.getAnalytics(t),getTeams:async t=>{let e=await s.TeamDatabase.getAll();if(!t)return e;let a=e;if(t.ownerId&&(a=a.filter(e=>e.ownerId===t.ownerId)),t.status&&(a=a.filter(e=>e.status===t.status)),t.search){let e=t.search.toLowerCase();a=a.filter(t=>t.teamId.toLowerCase().includes(e)||t.name.toLowerCase().includes(e))}return a},getTeam:t=>s.TeamDatabase.getById(t),getTeamById:t=>s.TeamDatabase.getById(t),createTeam:t=>s.TeamDatabase.create(t),updateTeam:(t,e)=>s.TeamDatabase.update(t,e),deleteTeam:t=>s.TeamDatabase.delete(t),getTeamAnalytics:t=>s.TeamDatabase.getAnalytics(t),getUsers:async t=>{let e=await s.UserDatabase.getAll();if(!t)return e;let a=e;if(t.role&&(a=a.filter(e=>e.role===t.role)),t.status&&(a=a.filter(e=>e.status===t.status)),t.search){let e=t.search.toLowerCase();a=a.filter(t=>t.userId.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.name.toLowerCase().includes(e))}return a},getUser:t=>s.UserDatabase.getById(t),getUserById:t=>s.UserDatabase.getById(t),getUserByEmail:t=>s.UserDatabase.getByEmail(t),createUser:(t,e)=>s.UserDatabase.create(t,e),updateUser:(t,e)=>s.UserDatabase.update(t,e),deleteUser:t=>s.UserDatabase.delete(t),getWallets:()=>s.WalletDatabase.getAll(),getWallet:t=>s.WalletDatabase.getById(t),getWalletByTeamId:t=>s.WalletDatabase.getByEntity(t,"team"),createWallet:t=>s.WalletDatabase.create(t),updateWallet:(t,e)=>s.WalletDatabase.update(t,e),updateWalletBalance:async(t,e)=>{let a=await s.WalletDatabase.getById(t);return a?s.WalletDatabase.update(t,{balance:(a.balance||0)+e}):null},getTransactions:async t=>{let e=await s.TransactionDatabase.getAll();if(!t)return e;let a=e;return t.teamId&&(a=a.filter(e=>e.teamId===t.teamId)),t.walletId&&(a=a.filter(e=>e.walletId===t.walletId)),a},getTransaction:t=>s.TransactionDatabase.getById(t),createTransaction:t=>s.TransactionDatabase.create(t),getContracts:async t=>{let e=await s.ContractDatabase.getAll();return t?e.filter(e=>e.teamId===t):e},getContract:t=>s.ContractDatabase.getById(t),getContractById:t=>s.ContractDatabase.getById(t),createContract:t=>s.ContractDatabase.create(t),updateContract:(t,e)=>s.ContractDatabase.update(t,e),getSubscriptions:async t=>{let e=await s.SubscriptionDatabase.getAll();return t?e.filter(e=>e.teamId===t):e},getSubscription:t=>s.SubscriptionDatabase.getById(t),createSubscription:t=>s.SubscriptionDatabase.create(t),updateSubscription:(t,e)=>s.SubscriptionDatabase.update(t,e),getPaymentMethods:async t=>await s.PaymentMethodDatabase.getByUser(t),createPaymentMethod:t=>s.PaymentMethodDatabase.create(t),deletePaymentMethod:t=>s.PaymentMethodDatabase.delete(t),getAuditLogs:async t=>{let{items:e}=await s.AuditLogDatabase.getAll(100,0);if(!t)return e;let a=e;return t.userId&&(a=a.filter(e=>e.userId===t.userId)),t.resource&&(a=a.filter(e=>e.resource===t.resource)),a},createAuditLog:t=>s.AuditLogDatabase.create(t),getFeatureFlags:()=>s.FeatureFlagDatabase.getAll(),getFeatureFlag:t=>s.FeatureFlagDatabase.getById(t),createFeatureFlag:t=>s.FeatureFlagDatabase.create(t),updateFeatureFlag:(t,e)=>s.FeatureFlagDatabase.update(t,e),getWhiteLabels:async t=>{let e=await s.WhiteLabelDatabase.getAll();return t?e.filter(e=>e.teamId===t):e},getWhiteLabelConfigs:async t=>{let e=await s.WhiteLabelDatabase.getAll();return t?e.filter(e=>e.teamId===t):e},getWhiteLabel:t=>s.WhiteLabelDatabase.getById(t),createWhiteLabel:t=>s.WhiteLabelDatabase.create(t),updateWhiteLabel:(t,e)=>s.WhiteLabelDatabase.update(t,e),getReferrals:async t=>{let e=await s.ReferralDatabase.getAll();if(!t)return e;let a=e;return t.referrerId&&(a=a.filter(e=>e.referrerId===t.referrerId)),t.status&&(a=a.filter(e=>e.status===t.status)),a},getReferral:t=>s.ReferralDatabase.getById(t),createReferral:t=>s.ReferralDatabase.create(t),updateReferral:(t,e)=>s.ReferralDatabase.update(t,e),getTeamMembers:t=>s.TeamMemberDatabase.getByTeam(t),addTeamMember:t=>s.TeamMemberDatabase.create(t),removeTeamMember:(t,e)=>s.TeamMemberDatabase.removeByUserAndTeam(t,e),getInvites:async t=>t?s.TeamInviteDatabase.getByTeam(t):s.TeamInviteDatabase.getAll(),getInviteById:t=>s.TeamInviteDatabase.getById(t),createInvite:t=>s.TeamInviteDatabase.create(t),updateInvite:(t,e)=>s.TeamInviteDatabase.update(t,e),getInvoices:async t=>[],createInvoice:async t=>({id:"mock",...t}),getPlans:async()=>s.PlanDatabase.getActive(),createPlan:async t=>({id:"mock",...t}),deletePlan:async t=>!0,setDefaultPaymentMethod:async t=>({id:t,isDefault:!0}),getUsageReports:async t=>[],createUsageReport:async t=>({id:"mock",...t}),getSettings:async t=>[],updateSetting:async(t,e,a)=>({key:t,value:e})};t.s(["Database",()=>r]),a()}catch(t){a(t)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__2da44ea1._.js.map