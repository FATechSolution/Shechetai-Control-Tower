module.exports=[62455,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(81560),f=a.i(92258),g=a.i(60246);let h=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var i=a.i(96221),j=a.i(62394),k=a.i(62477),l=a.i(95558);function m(){let[a,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)({userId:"",email:"",role:"member"}),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)({email:"",role:"member"});(0,c.useEffect)(()=>{N()},[]),(0,c.useEffect)(()=>{t&&O()},[t]);let N=async()=>{try{if(w(!0),!await (0,j.getCurrentUserToken)())return;let a=await k.apiClient.getTeams();if(a.success){let b=a.data?.data||a.data||[];if(s(Array.isArray(b)?b:[]),Array.isArray(b)&&b.length>0){let a=b[0].teamId||b[0].id;u(a)}}}catch(a){console.error("Error fetching teams:",a),y("Failed to load teams")}finally{w(!1)}},O=async()=>{try{w(!0);let a=await (0,j.getCurrentUserToken)();if(!a)return;let b=await fetch(`/api/teams/${t}/members`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json(),c=a.data?.members||a.data||[];m(Array.isArray(c)?c:[])}let c=await fetch(`/api/teams/${t}/invites`,{headers:{Authorization:`Bearer ${a}`}});if(c.ok){let a=(await c.json()).data||[],b=Array.isArray(a)?a:[],d=b.filter(a=>"pending"===a.status);o(d),q(b)}y("")}catch(a){console.error("Error fetching team data:",a),y("Failed to load team data")}finally{w(!1)}},P=async a=>{a.preventDefault(),y(""),A(""),E(!0);try{let a=await (0,j.getCurrentUserToken)();if(!a)return;let b=await fetch(`/api/teams/${t}/members`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(F)});if(b.ok)A("Member assigned successfully!"),G({userId:"",email:"",role:"member"}),C(!1),await O();else{let a=await b.json();y(a.error||"Failed to assign member")}}catch(a){y(a.message||"Failed to assign member")}finally{E(!1)}},Q=async a=>{a.preventDefault(),y(""),A(""),K(!0);try{let a=await (0,j.getCurrentUserToken)();if(!a)return;let b=await fetch(`/api/teams/${t}/invites`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(L)});if(b.ok)A("Invite created successfully!"),M({email:"",role:"member"}),I(!1),await O();else{let a=await b.json();y(a.error||"Failed to create invite")}}catch(a){y(a.message||"Failed to create invite")}finally{K(!1)}},R=async(a,b)=>{if(confirm(`Are you sure you want to remove ${b} from this team?`))try{let b=await (0,j.getCurrentUserToken)();if(!b)return;let c=await fetch(`/api/teams/${t}/members/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(c.ok)A("Member removed successfully!"),await O();else{let a=await c.json();y(a.error||"Failed to remove member")}}catch(a){y(a.message||"Failed to remove member")}};return v&&0===r.length?(0,b.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto flex items-center justify-center min-h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading seats and invites..."})]})}):0===r.length?(0,b.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto space-y-4 sm:space-y-8 animate-fade-in-up",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Seats & Invites"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage team membership and seat allocations"})]}),(0,b.jsxs)("div",{className:"text-center py-12 bg-card border border-border rounded-lg",children:[(0,b.jsx)(g.Users,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No teams found"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create a team first to manage seats and invites"})]})]}):(0,b.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto space-y-4 sm:space-y-8 animate-fade-in-up",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Seats & Invites"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage team membership and seat allocations"})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 sm:p-6",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Select Team"}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"",children:"Choose a team..."}),r.map(a=>(0,b.jsxs)("option",{value:a.teamId||a.id,children:[a.name," (",a.teamId||a.id,")"]},a.teamId||a.id))]})]}),x&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-red-400 text-sm",children:x}),z&&(0,b.jsx)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3 text-green-400 text-sm",children:z}),v?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading team data..."})]}):(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,b.jsx)("div",{className:"animate-fade-in-up",style:{animation:"fadeInUp 0.4s ease-out 0s both"},children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 sm:p-6 hover:shadow-lg hover:shadow-primary/5 transition-all duration-300 h-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Users,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary"}),(0,b.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-card-foreground",children:"Active Seats"})]}),(0,b.jsxs)("button",{onClick:()=>C(!0),disabled:!t,className:"flex items-center gap-1 sm:gap-2 px-2.5 sm:px-3 py-1.5 bg-primary text-primary-foreground rounded-lg text-xs sm:text-sm font-medium hover:bg-primary/90 hover:shadow-lg transition-all duration-200 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(d.Plus,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Assign"})]})]}),0===a.length?(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground text-center py-4",children:"No active seats"}):(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2.5 sm:p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors duration-200 group text-xs sm:text-sm",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-foreground truncate",children:a.email||a.userId}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[a.role," • ",new Date(a.joinedAt||a.createdAt).toLocaleDateString()]})]}),(0,b.jsx)("button",{onClick:()=>R(a.userId,a.email||a.userId),className:"opacity-0 group-hover:opacity-100 text-destructive hover:text-destructive/80 transition-all flex-shrink-0",children:(0,b.jsx)(e.Trash2,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]},a.userId))})]})}),(0,b.jsx)("div",{className:"animate-fade-in-up",style:{animation:"fadeInUp 0.4s ease-out 0.1s both"},children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 sm:p-6 hover:shadow-lg hover:shadow-primary/5 transition-all duration-300 h-full",children:[(0,b.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-card-foreground mb-4",children:"Pending Requests"}),(0,b.jsx)("div",{className:"space-y-2",children:0===n.length?(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground text-center py-4",children:"No pending requests"}):n.map(a=>(0,b.jsxs)("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg text-xs sm:text-sm",children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.email}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[a.role," • Invited ",new Date(a.createdAt).toLocaleDateString()]}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs mt-1",children:["Expires: ",new Date(a.expiresAt).toLocaleDateString()]})]},a.inviteId||a.id))})]})}),(0,b.jsx)("div",{className:"animate-fade-in-up",style:{animation:"fadeInUp 0.4s ease-out 0.2s both"},children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 sm:p-6 hover:shadow-lg hover:shadow-primary/5 transition-all duration-300 h-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Mail,{className:"w-4 h-4 sm:w-5 sm:h-5 text-accent"}),(0,b.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-card-foreground",children:"Team Invites"})]}),(0,b.jsxs)("button",{onClick:()=>I(!0),disabled:!t,className:"flex items-center gap-1 sm:gap-2 px-2.5 sm:px-3 py-1.5 bg-primary text-primary-foreground rounded-lg text-xs sm:text-sm font-medium hover:bg-primary/90 hover:shadow-lg transition-all duration-200 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(h,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Create"})]})]}),0===p.length?(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground text-center py-4",children:"No invites"}):(0,b.jsx)("div",{className:"space-y-2",children:p.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2.5 sm:p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors duration-200 group text-xs sm:text-sm",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-foreground truncate",children:a.email}),(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:[a.role," • ",a.status]})]}),(0,b.jsx)("span",{className:`text-xs px-2.5 py-1 rounded-full font-semibold whitespace-nowrap flex-shrink-0 ${"accepted"===a.status?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:a.status})]},a.inviteId||a.id))})]})})]}),(0,b.jsx)(l.Dialog,{isOpen:B,onClose:()=>{C(!1),y(""),G({userId:"",email:"",role:"member"})},title:"Assign Team Member",children:(0,b.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"User ID *"}),(0,b.jsx)("input",{type:"text",value:F.userId,onChange:a=>G({...F,userId:a.target.value}),placeholder:"e.g., user_123",required:!0,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email *"}),(0,b.jsx)("input",{type:"email",value:F.email,onChange:a=>G({...F,email:a.target.value}),placeholder:"user@example.com",required:!0,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Role"}),(0,b.jsxs)("select",{value:F.role,onChange:a=>G({...F,role:a.target.value}),className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"member",children:"Member"}),(0,b.jsx)("option",{value:"leader",children:"Leader"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]})]}),x&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-red-400 text-sm",children:x}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{C(!1),y("")},className:"flex-1 px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors",disabled:D,children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",disabled:D,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[D&&(0,b.jsx)(i.Loader2,{className:"w-4 h-4 animate-spin"}),D?"Assigning...":"Assign Member"]})]})]})}),(0,b.jsx)(l.Dialog,{isOpen:H,onClose:()=>{I(!1),y(""),M({email:"",role:"member"})},title:"Create Team Invite",children:(0,b.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email *"}),(0,b.jsx)("input",{type:"email",value:L.email,onChange:a=>M({...L,email:a.target.value}),placeholder:"user@example.com",required:!0,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"An invite email will be sent to this address"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Role"}),(0,b.jsxs)("select",{value:L.role,onChange:a=>M({...L,role:a.target.value}),className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"member",children:"Member"}),(0,b.jsx)("option",{value:"leader",children:"Leader"}),(0,b.jsx)("option",{value:"admin",children:"Admin"})]})]}),x&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-red-400 text-sm",children:x}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{I(!1),y("")},className:"flex-1 px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors",disabled:J,children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",disabled:J,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[J&&(0,b.jsx)(i.Loader2,{className:"w-4 h-4 animate-spin"}),J?"Creating...":"Create Invite"]})]})]})})]})}a.s(["default",()=>m],62455)}];

//# sourceMappingURL=components_pages_seats-invites_tsx_3b596807._.js.map