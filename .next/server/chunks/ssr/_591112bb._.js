module.exports=[62477,a=>{"use strict";var b=a.i(62394),c=a.i(23812);let d=new class{apiKey=null;setApiKey(a){this.apiKey=a}async request(a,d={},e=!0){let f={"Content-Type":"application/json"};try{let a=await (0,b.getCurrentUserToken)();a?f.Authorization=`Bearer ${a}`:this.apiKey&&(f["x-api-key"]=this.apiKey)}catch(a){console.warn("Error getting Firebase token (continuing without auth):",a)}d.headers&&Object.assign(f,d.headers);try{let b=e?c.fetchWithRetry:fetch,g=await b(`http://localhost:3000${a}`,{...d,headers:f}),h=await g.json();if(!g.ok)return console.error(`API Error [${g.status}] at ${a}:`,h),{success:!1,error:h.error||"API request failed",data:null};return h}catch(b){return console.error(`Request failed for ${a}:`,b),{success:!1,error:b instanceof Error?b.message:"Request failed",data:null}}}async getOverview(){return this.request("/api/overview")}async getAgents(a){let b=new URLSearchParams;a?.page&&b.set("page",a.page.toString()),a?.limit&&b.set("limit",a.limit.toString()),a?.teamId&&b.set("teamId",a.teamId),a?.status&&b.set("status",a.status),a?.search&&b.set("search",a.search);let c=b.toString();return this.request(`/api/agents${c?`?${c}`:""}`)}async getAgent(a){return this.request(`/api/agents/${a}`)}async createAgent(a){return this.request("/api/agents",{method:"POST",body:JSON.stringify(a)})}async updateAgent(a,b){return this.request(`/api/agents/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteAgent(a){return this.request(`/api/agents/${a}`,{method:"DELETE"})}async getTeams(a){let b=new URLSearchParams;a?.page&&b.set("page",a.page.toString()),a?.limit&&b.set("limit",a.limit.toString()),a?.ownerId&&b.set("ownerId",a.ownerId),a?.status&&b.set("status",a.status),a?.search&&b.set("search",a.search);let c=b.toString();return this.request(`/api/teams${c?`?${c}`:""}`)}async getTeam(a){return this.request(`/api/teams/${a}`)}async createTeam(a){return this.request("/api/teams",{method:"POST",body:JSON.stringify(a)})}async updateTeam(a,b){return this.request(`/api/teams/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteTeam(a){return this.request(`/api/teams/${a}`,{method:"DELETE"})}async getTeamMembers(a){return this.request(`/api/teams/${a}/members`)}async addTeamMember(a,b){return this.request(`/api/teams/${a}/members`,{method:"POST",body:JSON.stringify(b)})}async removeTeamMember(a,b){return this.request(`/api/teams/${a}/members/${b}`,{method:"DELETE"})}async getTeamInvites(a){return this.request(`/api/teams/${a}/invites`)}async createTeamInvite(a,b){return this.request(`/api/teams/${a}/invites`,{method:"POST",body:JSON.stringify(b)})}async getContracts(a){let b=new URLSearchParams;a?.page&&b.set("page",a.page.toString()),a?.limit&&b.set("limit",a.limit.toString()),a?.teamId&&b.set("teamId",a.teamId);let c=b.toString();return this.request(`/api/billing/contracts${c?`?${c}`:""}`)}async getContract(a){return this.request(`/api/billing/contracts/${a}`)}async createContract(a){return this.request("/api/billing/contracts",{method:"POST",body:JSON.stringify(a)})}async updateContract(a,b){return this.request(`/api/billing/contracts/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async cancelContract(a){return this.request(`/api/billing/contracts/${a}`,{method:"DELETE"})}async getInvoices(a){let b=a?`?teamId=${a}`:"";return this.request(`/api/billing/invoices${b}`)}async createInvoice(a){return this.request("/api/billing/invoices",{method:"POST",body:JSON.stringify(a)})}async getWallet(a){return this.request(`/api/wallets?teamId=${a}`)}async createWallet(a){return this.request("/api/wallets",{method:"POST",body:JSON.stringify(a)})}async grantCredits(a){return this.request("/api/credits/grant",{method:"POST",body:JSON.stringify(a)})}async getTransactions(a){let b=new URLSearchParams;a?.page&&b.set("page",a.page.toString()),a?.limit&&b.set("limit",a.limit.toString()),a?.teamId&&b.set("teamId",a.teamId),a?.walletId&&b.set("walletId",a.walletId);let c=b.toString();return this.request(`/api/credits/transactions${c?`?${c}`:""}`)}async getWhiteLabelConfigs(a){let b=a?`?teamId=${a}`:"";return this.request(`/api/white-label${b}`)}async getWhiteLabelConfig(a){return this.request(`/api/white-label/${a}`)}async createWhiteLabelConfig(a){return this.request("/api/white-label",{method:"POST",body:JSON.stringify(a)})}async updateWhiteLabelConfig(a,b){return this.request(`/api/white-label/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteWhiteLabelConfig(a){return this.request(`/api/white-label/${a}`,{method:"DELETE"})}async getReferrals(a){let b=new URLSearchParams;return a?.referrerId&&b.set("referrerId",a.referrerId),a?.status&&b.set("status",a.status),this.request(`/api/referrals?${b}`)}async createReferral(a){return this.request("/api/referrals",{method:"POST",body:JSON.stringify(a)})}async getUsers(a){let b=new URLSearchParams;a?.page&&b.set("page",a.page.toString()),a?.limit&&b.set("limit",a.limit.toString()),a?.role&&b.set("role",a.role),a?.status&&b.set("status",a.status),a?.search&&b.set("search",a.search);let c=b.toString();return this.request(`/api/users${c?`?${c}`:""}`)}async getUser(a){return this.request(`/api/users/${a}`)}async createUser(a){return this.request("/api/users",{method:"POST",body:JSON.stringify(a)})}async updateUser(a,b){return this.request(`/api/users/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteUser(a){return this.request(`/api/users/${a}`,{method:"DELETE"})}async suspendUser(a,b){return this.request(`/api/users/${a}/suspend`,{method:"POST",body:JSON.stringify({reason:b})})}async activateUser(a){return this.request(`/api/users/${a}/activate`,{method:"POST"})}async getAgentAnalytics(a){return this.request(`/api/agents/${a}/analytics`)}async getTeamAnalytics(a){return this.request(`/api/teams/${a}/analytics`)}async getSubscriptions(a){let b=a?`?teamId=${a}`:"";return this.request(`/api/subscriptions${b}`)}async createSubscription(a){return this.request("/api/subscriptions",{method:"POST",body:JSON.stringify(a)})}async cancelSubscription(a,b=!0,c){return this.request(`/api/subscriptions/${a}/cancel`,{method:"POST",body:JSON.stringify({cancelAtPeriodEnd:b,reason:c})})}async getSubscriptionPlans(){return this.request("/api/subscriptions/plans")}async createSubscriptionPlan(a){return this.request("/api/subscriptions/plans",{method:"POST",body:JSON.stringify(a)})}async deleteSubscriptionPlan(a){return this.request(`/api/subscriptions/plans/${a}`,{method:"DELETE"})}async getPaymentMethods(a){let b=a?`?teamId=${a}`:"";return this.request(`/api/payment-methods${b}`)}async addPaymentMethod(a){return this.request("/api/payment-methods",{method:"POST",body:JSON.stringify(a)})}async deletePaymentMethod(a){return this.request(`/api/payment-methods/${a}`,{method:"DELETE"})}async setDefaultPaymentMethod(a){return this.request(`/api/payment-methods/${a}/default`,{method:"POST"})}async getAuditLogs(a){let b=new URLSearchParams;a?.page&&b.set("page",a.page.toString()),a?.limit&&b.set("limit",a.limit.toString()),a?.userId&&b.set("userId",a.userId),a?.resource&&b.set("resource",a.resource),a?.startDate&&b.set("startDate",a.startDate),a?.endDate&&b.set("endDate",a.endDate);let c=b.toString();return this.request(`/api/audit-logs${c?`?${c}`:""}`)}async getFeatureFlags(){return this.request("/api/admin/feature-flags")}async createFeatureFlag(a){return this.request("/api/admin/feature-flags",{method:"POST",body:JSON.stringify(a)})}async updateFeatureFlag(a,b){return this.request(`/api/admin/feature-flags/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async getAdminSettings(a){let b=a?`?category=${a}`:"";return this.request(`/api/admin/settings${b}`)}async updateAdminSettings(a){return this.request("/api/admin/settings",{method:"PUT",body:JSON.stringify(a)})}async getUsageReport(a,b){let c=new URLSearchParams;a&&c.set("startDate",a),b&&c.set("endDate",b);let d=c.toString();return this.request(`/api/reports/usage${d?`?${d}`:""}`)}async generateUsageReport(a){return this.request("/api/reports/usage",{method:"POST",body:JSON.stringify(a)})}};a.s(["apiClient",0,d],62477)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},24669,a=>{"use strict";let b=(0,a.i(70106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],24669)},1027,a=>{"use strict";let b=(0,a.i(70106).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["Zap",()=>b],1027)},1745,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(1027),e=a.i(24669),f=a.i(92e3);let g=(0,a.i(70106).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var h=a.i(62394),i=a.i(62477);function j(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)("balance");(0,c.useEffect)(()=>{q();let a=setInterval(q,5e3);return()=>clearInterval(a)},[o]);let q=async()=>{try{let a=await (0,h.getCurrentUserToken)();if(!a)return;let[b,c]=await Promise.all([fetch("/api/wallets",{headers:{Authorization:`Bearer ${a}`}}),i.apiClient.getTeams()]),d=[];if(b.ok){let a=await b.json();d=Array.isArray(a.data)?a.data:[]}let e=[];if(c.success){let a=c.data?.data||c.data||[];e=Array.isArray(a)?a:[]}l(e);let f=d.map(a=>{let b=e.find(b=>(b.teamId||b.id)===(a.teamId||a.id)),c=a.balance||0,d="empty";return c>=5e3?d="active":c>0&&(d="low"),{teamId:a.teamId||a.id||"",teamName:b?.name||a.teamId||"Unknown",balance:c,currency:a.currency||"usd",hasBalance:c>0,status:d}}).filter(a=>a.hasBalance);"balance"===o?f.sort((a,b)=>b.balance-a.balance):f.sort((a,b)=>a.teamName.localeCompare(b.teamName)),j(f)}catch(a){console.error("Error fetching data:",a)}finally{n(!1)}},r={teamsWithBalance:a.length,totalBalance:a.reduce((a,b)=>a+b.balance,0),averageBalance:a.length>0?a.reduce((a,b)=>a+b.balance,0)/a.length:0,activeTeams:a.filter(a=>"active"===a.status).length};return m?(0,b.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto flex items-center justify-center min-h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading wallet analytics..."})]})}):(0,b.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto space-y-4 sm:space-y-8 animate-fade-in-up",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Credits & Wallets"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Analytics on team wallet balances and credit usage"})]}),(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg",children:[(0,b.jsx)(g,{className:"w-4 h-4 text-primary"}),(0,b.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-foreground",children:[a.length," teams"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Teams with Balance"}),(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-accent mt-2",children:r.teamsWithBalance}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Active teams"})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",style:{animationDelay:"0.1s"},children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Total Balance"}),(0,b.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-accent mt-2",children:["$",(r.totalBalance/100).toFixed(2)]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all teams"})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",style:{animationDelay:"0.2s"},children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Average Balance"}),(0,b.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-accent mt-2",children:["$",(r.averageBalance/100).toFixed(2)]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Per team"})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",style:{animationDelay:"0.3s"},children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Active Teams"}),(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-400 mt-2",children:r.activeTeams}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"High balance"})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg animate-fade-in-up",style:{animationDelay:"0.4s"},children:[(0,b.jsxs)("div",{className:"p-4 sm:p-6 border-b border-border flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Zap,{className:"w-4 h-4 sm:w-5 sm:h-5 text-accent"}),(0,b.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-card-foreground",children:"Teams with Existing Balances"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-xs sm:text-sm text-muted-foreground",children:"Sort:"}),(0,b.jsxs)("select",{value:o,onChange:a=>p(a.target.value),className:"px-2 py-1 bg-input border border-border rounded text-xs sm:text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"balance",children:"Balance (High to Low)"}),(0,b.jsx)("option",{value:"name",children:"Team Name (A-Z)"})]})]})]}),0===a.length?(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)(f.AlertCircle,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-1",children:"No teams with existing balances"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Teams will appear here once they have credits"})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Team Name"}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Balance"}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Status"}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Percentage"})]})}),(0,b.jsx)("tbody",{children:a.map((a,c)=>{let d=a.balance/r.totalBalance*100||0,e="active"===a.status?"text-green-400 bg-green-500/10":"low"===a.status?"text-yellow-400 bg-yellow-500/10":"text-red-400 bg-red-500/10",f="active"===a.status?"Active":"low"===a.status?"Low":"Empty";return(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,b.jsx)("span",{className:"font-medium text-foreground",children:a.teamName})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,b.jsxs)("span",{className:"font-semibold text-accent",children:["$",(a.balance/100).toFixed(2)]})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${e}`,children:f})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-20 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-accent",style:{width:`${Math.min(d,100)}%`}})}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[d.toFixed(1),"%"]})]})})]},c)})})]})})]}),a.length>0&&(0,b.jsxs)("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-4 flex gap-3 animate-fade-in-up",style:{animationDelay:"0.5s"},children:[(0,b.jsx)(e.TrendingUp,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground mb-1",children:"Wallet Analytics"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"This page shows all teams with existing credit balances. Teams are sorted by balance to help you identify your most active or well-funded teams. Use this data for capacity planning and resource allocation."})]})]})]})}a.s(["default",()=>j],1745)}];

//# sourceMappingURL=_591112bb._.js.map