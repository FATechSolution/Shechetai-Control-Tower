(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},15760,e=>{"use strict";var t=e.i(60664);e.i(47167);var r=e.i(93210);let s=new class{apiKey=null;setApiKey(e){this.apiKey=e}async request(e,s={},a=!0){let i={"Content-Type":"application/json"};try{let e=await (0,t.getCurrentUserToken)();e?i.Authorization=`Bearer ${e}`:this.apiKey&&(i["x-api-key"]=this.apiKey)}catch(e){console.warn("Error getting Firebase token (continuing without auth):",e)}s.headers&&Object.assign(i,s.headers);try{let t=a?r.fetchWithRetry:fetch,n=await t(`http://localhost:3000${e}`,{...s,headers:i}),d=await n.json();if(!n.ok)return console.error(`API Error [${n.status}] at ${e}:`,d),{success:!1,error:d.error||"API request failed",data:null};return d}catch(t){return console.error(`Request failed for ${e}:`,t),{success:!1,error:t instanceof Error?t.message:"Request failed",data:null}}}async getOverview(){return this.request("/api/overview")}async getAgents(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.teamId&&t.set("teamId",e.teamId),e?.status&&t.set("status",e.status),e?.search&&t.set("search",e.search);let r=t.toString();return this.request(`/api/agents${r?`?${r}`:""}`)}async getAgent(e){return this.request(`/api/agents/${e}`)}async createAgent(e){return this.request("/api/agents",{method:"POST",body:JSON.stringify(e)})}async updateAgent(e,t){return this.request(`/api/agents/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteAgent(e){return this.request(`/api/agents/${e}`,{method:"DELETE"})}async getTeams(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.ownerId&&t.set("ownerId",e.ownerId),e?.status&&t.set("status",e.status),e?.search&&t.set("search",e.search);let r=t.toString();return this.request(`/api/teams${r?`?${r}`:""}`)}async getTeam(e){return this.request(`/api/teams/${e}`)}async createTeam(e){return this.request("/api/teams",{method:"POST",body:JSON.stringify(e)})}async updateTeam(e,t){return this.request(`/api/teams/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteTeam(e){return this.request(`/api/teams/${e}`,{method:"DELETE"})}async getTeamMembers(e){return this.request(`/api/teams/${e}/members`)}async addTeamMember(e,t){return this.request(`/api/teams/${e}/members`,{method:"POST",body:JSON.stringify(t)})}async removeTeamMember(e,t){return this.request(`/api/teams/${e}/members/${t}`,{method:"DELETE"})}async getTeamInvites(e){return this.request(`/api/teams/${e}/invites`)}async createTeamInvite(e,t){return this.request(`/api/teams/${e}/invites`,{method:"POST",body:JSON.stringify(t)})}async getContracts(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.teamId&&t.set("teamId",e.teamId);let r=t.toString();return this.request(`/api/billing/contracts${r?`?${r}`:""}`)}async getContract(e){return this.request(`/api/billing/contracts/${e}`)}async createContract(e){return this.request("/api/billing/contracts",{method:"POST",body:JSON.stringify(e)})}async updateContract(e,t){return this.request(`/api/billing/contracts/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async cancelContract(e){return this.request(`/api/billing/contracts/${e}`,{method:"DELETE"})}async getInvoices(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/billing/invoices${t}`)}async createInvoice(e){return this.request("/api/billing/invoices",{method:"POST",body:JSON.stringify(e)})}async getWallet(e){return this.request(`/api/wallets?teamId=${e}`)}async createWallet(e){return this.request("/api/wallets",{method:"POST",body:JSON.stringify(e)})}async grantCredits(e){return this.request("/api/credits/grant",{method:"POST",body:JSON.stringify(e)})}async getTransactions(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.teamId&&t.set("teamId",e.teamId),e?.walletId&&t.set("walletId",e.walletId);let r=t.toString();return this.request(`/api/credits/transactions${r?`?${r}`:""}`)}async getWhiteLabelConfigs(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/white-label${t}`)}async getWhiteLabelConfig(e){return this.request(`/api/white-label/${e}`)}async createWhiteLabelConfig(e){return this.request("/api/white-label",{method:"POST",body:JSON.stringify(e)})}async updateWhiteLabelConfig(e,t){return this.request(`/api/white-label/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteWhiteLabelConfig(e){return this.request(`/api/white-label/${e}`,{method:"DELETE"})}async getReferrals(e){let t=new URLSearchParams;return e?.referrerId&&t.set("referrerId",e.referrerId),e?.status&&t.set("status",e.status),this.request(`/api/referrals?${t}`)}async createReferral(e){return this.request("/api/referrals",{method:"POST",body:JSON.stringify(e)})}async getUsers(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.role&&t.set("role",e.role),e?.status&&t.set("status",e.status),e?.search&&t.set("search",e.search);let r=t.toString();return this.request(`/api/users${r?`?${r}`:""}`)}async getUser(e){return this.request(`/api/users/${e}`)}async createUser(e){return this.request("/api/users",{method:"POST",body:JSON.stringify(e)})}async updateUser(e,t){return this.request(`/api/users/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteUser(e){return this.request(`/api/users/${e}`,{method:"DELETE"})}async suspendUser(e,t){return this.request(`/api/users/${e}/suspend`,{method:"POST",body:JSON.stringify({reason:t})})}async activateUser(e){return this.request(`/api/users/${e}/activate`,{method:"POST"})}async getAgentAnalytics(e){return this.request(`/api/agents/${e}/analytics`)}async getTeamAnalytics(e){return this.request(`/api/teams/${e}/analytics`)}async getSubscriptions(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/subscriptions${t}`)}async createSubscription(e){return this.request("/api/subscriptions",{method:"POST",body:JSON.stringify(e)})}async cancelSubscription(e,t=!0,r){return this.request(`/api/subscriptions/${e}/cancel`,{method:"POST",body:JSON.stringify({cancelAtPeriodEnd:t,reason:r})})}async getSubscriptionPlans(){return this.request("/api/subscriptions/plans")}async createSubscriptionPlan(e){return this.request("/api/subscriptions/plans",{method:"POST",body:JSON.stringify(e)})}async deleteSubscriptionPlan(e){return this.request(`/api/subscriptions/plans/${e}`,{method:"DELETE"})}async getPaymentMethods(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/payment-methods${t}`)}async addPaymentMethod(e){return this.request("/api/payment-methods",{method:"POST",body:JSON.stringify(e)})}async deletePaymentMethod(e){return this.request(`/api/payment-methods/${e}`,{method:"DELETE"})}async setDefaultPaymentMethod(e){return this.request(`/api/payment-methods/${e}/default`,{method:"POST"})}async getAuditLogs(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.userId&&t.set("userId",e.userId),e?.resource&&t.set("resource",e.resource),e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate);let r=t.toString();return this.request(`/api/audit-logs${r?`?${r}`:""}`)}async getFeatureFlags(){return this.request("/api/admin/feature-flags")}async createFeatureFlag(e){return this.request("/api/admin/feature-flags",{method:"POST",body:JSON.stringify(e)})}async updateFeatureFlag(e,t){return this.request(`/api/admin/feature-flags/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async getAdminSettings(e){let t=e?`?category=${e}`:"";return this.request(`/api/admin/settings${t}`)}async updateAdminSettings(e){return this.request("/api/admin/settings",{method:"PUT",body:JSON.stringify(e)})}async getUsageReport(e,t){let r=new URLSearchParams;e&&r.set("startDate",e),t&&r.set("endDate",t);let s=r.toString();return this.request(`/api/reports/usage${s?`?${s}`:""}`)}async generateUsageReport(e){return this.request("/api/reports/usage",{method:"POST",body:JSON.stringify(e)})}};e.s(["apiClient",0,s],15760)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},63911,e=>{"use strict";var t=e.i(43476),r=e.i(61659),s=e.i(7233),a=e.i(31278),i=e.i(27612);let n=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var d=e.i(71645),o=e.i(15760),l=e.i(31897);function c(){let[e,c]=(0,d.useState)([]),[u,m]=(0,d.useState)([]),[h,p]=(0,d.useState)(""),[g,y]=(0,d.useState)(!0),[x,f]=(0,d.useState)(!1),[b,N]=(0,d.useState)(!1),[S,v]=(0,d.useState)(""),[j,q]=(0,d.useState)(""),[$,w]=(0,d.useState)({type:"card",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",cvv:"",isDefault:!1});(0,d.useEffect)(()=>{P()},[]),(0,d.useEffect)(()=>{h&&T()},[h]);let P=async()=>{y(!0);try{let e=await o.apiClient.getTeams(),t=e.data?.data||e.data||[],r=Array.isArray(t)?t:[];if(m(r),r.length>0){let e=r[0].teamId||r[0].id;p(e)}}catch(e){console.error("Error fetching teams:",e)}finally{y(!1)}},T=async()=>{if(h){y(!0);try{let e=await o.apiClient.getPaymentMethods(h);if(e.success){let t=e.data?.data||e.data||[];c(Array.isArray(t)?t:[])}}catch(e){console.error("Error fetching payment methods:",e)}finally{y(!1)}}},C=async e=>{if(e.preventDefault(),v(""),q(""),!h)return void v("No team selected");N(!0);try{(await o.apiClient.addPaymentMethod({teamId:h,type:$.type,cardNumber:$.cardNumber.replace(/\s/g,""),cardHolderName:$.cardHolderName,expiryMonth:$.expiryMonth,expiryYear:$.expiryYear,cvv:$.cvv,isDefault:$.isDefault})).success&&(q("Payment method added successfully!"),w({type:"card",cardNumber:"",cardHolderName:"",expiryMonth:"",expiryYear:"",cvv:"",isDefault:!1}),f(!1),await T())}catch(e){v(e.message||"Failed to add payment method")}finally{N(!1)}},O=async e=>{if(confirm("Are you sure you want to delete this payment method?"))try{await o.apiClient.deletePaymentMethod(e),q("Payment method deleted successfully!"),await T()}catch(e){v(e.message||"Failed to delete payment method")}},I=async e=>{try{await o.apiClient.setDefaultPaymentMethod(e),q("Default payment method updated!"),await T()}catch(e){v(e.message||"Failed to set default payment method")}};return(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto space-y-6 animate-fade-in-up",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(r.CreditCard,{className:"w-8 h-8 text-primary"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Payment Methods"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your payment methods and billing information"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[u.length>0&&(0,t.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a team..."}),u.map(e=>(0,t.jsx)("option",{value:e.teamId||e.id,children:e.name},e.teamId||e.id))]}),(0,t.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4"}),"Add Payment Method"]})]})]}),g?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(a.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):0===e.length?(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,t.jsx)(r.CreditCard,{className:"w-16 h-16 mx-auto text-muted-foreground/50 mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No payment methods found"}),(0,t.jsxs)("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4"}),"Add Your First Payment Method"]})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{let r,s;return(0,t.jsxs)("div",{className:"bg-gradient-to-br from-card to-muted/30 border border-border rounded-xl p-6 hover:shadow-lg transition-all relative",children:[e.isDefault&&(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 bg-primary text-primary-foreground rounded-full text-xs font-semibold",children:[(0,t.jsx)(n,{className:"w-3 h-3"}),"Default"]})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:(r=(e.cardNumber||e.last4||"").replace(/\s/g,"")).startsWith("4")?"Visa":r.startsWith("5")?"Mastercard":r.startsWith("3")?"Amex":"Card"}),(0,t.jsx)("div",{className:"text-xl font-mono text-foreground tracking-wider",children:e.cardNumber?(s=e.cardNumber.slice(-4),`•••• •••• •••• ${s}`):e.last4?`•••• •••• •••• ${e.last4}`:"•••• •••• •••• ••••"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-end mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Card Holder"}),(0,t.jsx)("div",{className:"text-sm font-medium text-foreground",children:e.cardHolderName||"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Expires"}),(0,t.jsx)("div",{className:"text-sm font-medium text-foreground",children:e.expiryMonth&&e.expiryYear?`${e.expiryMonth}/${e.expiryYear}`:"N/A"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-border",children:[!e.isDefault&&(0,t.jsx)("button",{onClick:()=>I(e.paymentMethodId||e.id),className:"flex-1 px-3 py-2 bg-primary/10 text-primary rounded-lg hover:bg-primary/20 transition-colors text-sm",children:"Set Default"}),(0,t.jsxs)("button",{onClick:()=>O(e.paymentMethodId||e.id),className:"flex-1 px-3 py-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20 transition-colors text-sm",children:[(0,t.jsx)(i.Trash2,{className:"w-4 h-4 inline mr-1"}),"Delete"]})]})]},e.paymentMethodId||e.id)})}),(j||S)&&(0,t.jsx)("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg animate-fade-in-up ${j?"bg-green-500/20 border border-green-500/20 text-green-400":"bg-red-500/20 border border-red-500/20 text-red-400"}`,children:j||S}),(0,t.jsx)(l.Dialog,{isOpen:x,onClose:()=>{f(!1),v("")},title:"Add Payment Method",description:"Add a new card for payments",children:(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Card Number *"}),(0,t.jsx)("input",{type:"text",value:$.cardNumber,onChange:e=>{let t,r,s=(r=(t=e.target.value.replace(/\s/g,"")).match(/.{1,4}/g))?r.join(" "):t;s.replace(/\s/g,"").length<=16&&w({...$,cardNumber:s})},placeholder:"1234 5678 9012 3456",required:!0,maxLength:19,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary font-mono"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Card Holder Name *"}),(0,t.jsx)("input",{type:"text",value:$.cardHolderName,onChange:e=>w({...$,cardHolderName:e.target.value}),placeholder:"John Doe",required:!0,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Month *"}),(0,t.jsx)("input",{type:"text",value:$.expiryMonth,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length<=2&&(""===t||parseInt(t)>=1&&12>=parseInt(t))&&w({...$,expiryMonth:t})},placeholder:"MM",required:!0,maxLength:2,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Year *"}),(0,t.jsx)("input",{type:"text",value:$.expiryYear,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length<=4&&w({...$,expiryYear:t})},placeholder:"YYYY",required:!0,maxLength:4,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"CVV *"}),(0,t.jsx)("input",{type:"text",value:$.cvv,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length<=4&&w({...$,cvv:t})},placeholder:"123",required:!0,maxLength:4,className:"w-full px-3 py-2 bg-input border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isDefault",checked:$.isDefault,onChange:e=>w({...$,isDefault:e.target.checked}),className:"w-4 h-4"}),(0,t.jsx)("label",{htmlFor:"isDefault",className:"text-sm text-foreground",children:"Set as default payment method"})]}),S&&(0,t.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-red-400 text-sm",children:S}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{f(!1),v("")},className:"flex-1 px-4 py-2 bg-muted text-foreground rounded-lg hover:bg-muted/80 transition-colors",disabled:b,children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[b&&(0,t.jsx)(a.Loader2,{className:"w-4 h-4 animate-spin"}),b?"Adding...":"Add Card"]})]})]})})]})}e.s(["default",()=>c],63911)}]);