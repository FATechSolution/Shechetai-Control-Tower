(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15760,e=>{"use strict";var t=e.i(60664);e.i(47167);var s=e.i(93210);let a=new class{apiKey=null;setApiKey(e){this.apiKey=e}async request(e,a={},r=!0){let i={"Content-Type":"application/json"};try{let e=await (0,t.getCurrentUserToken)();e?i.Authorization=`Bearer ${e}`:this.apiKey&&(i["x-api-key"]=this.apiKey)}catch(e){console.warn("Error getting Firebase token (continuing without auth):",e)}a.headers&&Object.assign(i,a.headers);try{let t=r?s.fetchWithRetry:fetch,n=await t(`http://localhost:3000${e}`,{...a,headers:i}),l=await n.json();if(!n.ok)return console.error(`API Error [${n.status}] at ${e}:`,l),{success:!1,error:l.error||"API request failed",data:null};return l}catch(t){return console.error(`Request failed for ${e}:`,t),{success:!1,error:t instanceof Error?t.message:"Request failed",data:null}}}async getOverview(){return this.request("/api/overview")}async getAgents(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.teamId&&t.set("teamId",e.teamId),e?.status&&t.set("status",e.status),e?.search&&t.set("search",e.search);let s=t.toString();return this.request(`/api/agents${s?`?${s}`:""}`)}async getAgent(e){return this.request(`/api/agents/${e}`)}async createAgent(e){return this.request("/api/agents",{method:"POST",body:JSON.stringify(e)})}async updateAgent(e,t){return this.request(`/api/agents/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteAgent(e){return this.request(`/api/agents/${e}`,{method:"DELETE"})}async getTeams(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.ownerId&&t.set("ownerId",e.ownerId),e?.status&&t.set("status",e.status),e?.search&&t.set("search",e.search);let s=t.toString();return this.request(`/api/teams${s?`?${s}`:""}`)}async getTeam(e){return this.request(`/api/teams/${e}`)}async createTeam(e){return this.request("/api/teams",{method:"POST",body:JSON.stringify(e)})}async updateTeam(e,t){return this.request(`/api/teams/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteTeam(e){return this.request(`/api/teams/${e}`,{method:"DELETE"})}async getTeamMembers(e){return this.request(`/api/teams/${e}/members`)}async addTeamMember(e,t){return this.request(`/api/teams/${e}/members`,{method:"POST",body:JSON.stringify(t)})}async removeTeamMember(e,t){return this.request(`/api/teams/${e}/members/${t}`,{method:"DELETE"})}async getTeamInvites(e){return this.request(`/api/teams/${e}/invites`)}async createTeamInvite(e,t){return this.request(`/api/teams/${e}/invites`,{method:"POST",body:JSON.stringify(t)})}async getContracts(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.teamId&&t.set("teamId",e.teamId);let s=t.toString();return this.request(`/api/billing/contracts${s?`?${s}`:""}`)}async getContract(e){return this.request(`/api/billing/contracts/${e}`)}async createContract(e){return this.request("/api/billing/contracts",{method:"POST",body:JSON.stringify(e)})}async updateContract(e,t){return this.request(`/api/billing/contracts/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async cancelContract(e){return this.request(`/api/billing/contracts/${e}`,{method:"DELETE"})}async getInvoices(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/billing/invoices${t}`)}async createInvoice(e){return this.request("/api/billing/invoices",{method:"POST",body:JSON.stringify(e)})}async getWallet(e){return this.request(`/api/wallets?teamId=${e}`)}async createWallet(e){return this.request("/api/wallets",{method:"POST",body:JSON.stringify(e)})}async grantCredits(e){return this.request("/api/credits/grant",{method:"POST",body:JSON.stringify(e)})}async getTransactions(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.teamId&&t.set("teamId",e.teamId),e?.walletId&&t.set("walletId",e.walletId);let s=t.toString();return this.request(`/api/credits/transactions${s?`?${s}`:""}`)}async getWhiteLabelConfigs(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/white-label${t}`)}async getWhiteLabelConfig(e){return this.request(`/api/white-label/${e}`)}async createWhiteLabelConfig(e){return this.request("/api/white-label",{method:"POST",body:JSON.stringify(e)})}async updateWhiteLabelConfig(e,t){return this.request(`/api/white-label/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteWhiteLabelConfig(e){return this.request(`/api/white-label/${e}`,{method:"DELETE"})}async getReferrals(e){let t=new URLSearchParams;return e?.referrerId&&t.set("referrerId",e.referrerId),e?.status&&t.set("status",e.status),this.request(`/api/referrals?${t}`)}async createReferral(e){return this.request("/api/referrals",{method:"POST",body:JSON.stringify(e)})}async getUsers(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.role&&t.set("role",e.role),e?.status&&t.set("status",e.status),e?.search&&t.set("search",e.search);let s=t.toString();return this.request(`/api/users${s?`?${s}`:""}`)}async getUser(e){return this.request(`/api/users/${e}`)}async createUser(e){return this.request("/api/users",{method:"POST",body:JSON.stringify(e)})}async updateUser(e,t){return this.request(`/api/users/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteUser(e){return this.request(`/api/users/${e}`,{method:"DELETE"})}async suspendUser(e,t){return this.request(`/api/users/${e}/suspend`,{method:"POST",body:JSON.stringify({reason:t})})}async activateUser(e){return this.request(`/api/users/${e}/activate`,{method:"POST"})}async getAgentAnalytics(e){return this.request(`/api/agents/${e}/analytics`)}async getTeamAnalytics(e){return this.request(`/api/teams/${e}/analytics`)}async getSubscriptions(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/subscriptions${t}`)}async createSubscription(e){return this.request("/api/subscriptions",{method:"POST",body:JSON.stringify(e)})}async cancelSubscription(e,t=!0,s){return this.request(`/api/subscriptions/${e}/cancel`,{method:"POST",body:JSON.stringify({cancelAtPeriodEnd:t,reason:s})})}async getSubscriptionPlans(){return this.request("/api/subscriptions/plans")}async createSubscriptionPlan(e){return this.request("/api/subscriptions/plans",{method:"POST",body:JSON.stringify(e)})}async deleteSubscriptionPlan(e){return this.request(`/api/subscriptions/plans/${e}`,{method:"DELETE"})}async getPaymentMethods(e){let t=e?`?teamId=${e}`:"";return this.request(`/api/payment-methods${t}`)}async addPaymentMethod(e){return this.request("/api/payment-methods",{method:"POST",body:JSON.stringify(e)})}async deletePaymentMethod(e){return this.request(`/api/payment-methods/${e}`,{method:"DELETE"})}async setDefaultPaymentMethod(e){return this.request(`/api/payment-methods/${e}/default`,{method:"POST"})}async getAuditLogs(e){let t=new URLSearchParams;e?.page&&t.set("page",e.page.toString()),e?.limit&&t.set("limit",e.limit.toString()),e?.userId&&t.set("userId",e.userId),e?.resource&&t.set("resource",e.resource),e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate);let s=t.toString();return this.request(`/api/audit-logs${s?`?${s}`:""}`)}async getFeatureFlags(){return this.request("/api/admin/feature-flags")}async createFeatureFlag(e){return this.request("/api/admin/feature-flags",{method:"POST",body:JSON.stringify(e)})}async updateFeatureFlag(e,t){return this.request(`/api/admin/feature-flags/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async getAdminSettings(e){let t=e?`?category=${e}`:"";return this.request(`/api/admin/settings${t}`)}async updateAdminSettings(e){return this.request("/api/admin/settings",{method:"PUT",body:JSON.stringify(e)})}async getUsageReport(e,t){let s=new URLSearchParams;e&&s.set("startDate",e),t&&s.set("endDate",t);let a=s.toString();return this.request(`/api/reports/usage${a?`?${a}`:""}`)}async generateUsageReport(e){return this.request("/api/reports/usage",{method:"POST",body:JSON.stringify(e)})}};e.s(["apiClient",0,a],15760)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},83159,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(39312),r=e.i(25652),i=e.i(63209);let n=(0,e.i(75254).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var l=e.i(60664),d=e.i(15760);function c(){let[e,c]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[p,g]=(0,s.useState)("balance");(0,s.useEffect)(()=>{x();let e=setInterval(x,5e3);return()=>clearInterval(e)},[p]);let x=async()=>{try{let e=await (0,l.getCurrentUserToken)();if(!e)return;let[t,s]=await Promise.all([fetch("/api/wallets",{headers:{Authorization:`Bearer ${e}`}}),d.apiClient.getTeams()]),a=[];if(t.ok){let e=await t.json();a=Array.isArray(e.data)?e.data:[]}let r=[];if(s.success){let e=s.data?.data||s.data||[];r=Array.isArray(e)?e:[]}m(r);let i=a.map(e=>{let t=r.find(t=>(t.teamId||t.id)===(e.teamId||e.id)),s=e.balance||0,a="empty";return s>=5e3?a="active":s>0&&(a="low"),{teamId:e.teamId||e.id||"",teamName:t?.name||e.teamId||"Unknown",balance:s,currency:e.currency||"usd",hasBalance:s>0,status:a}}).filter(e=>e.hasBalance);"balance"===p?i.sort((e,t)=>t.balance-e.balance):i.sort((e,t)=>e.teamName.localeCompare(t.teamName)),c(i)}catch(e){console.error("Error fetching data:",e)}finally{h(!1)}},y={teamsWithBalance:e.length,totalBalance:e.reduce((e,t)=>e+t.balance,0),averageBalance:e.length>0?e.reduce((e,t)=>e+t.balance,0)/e.length:0,activeTeams:e.filter(e=>"active"===e.status).length};return u?(0,t.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto flex items-center justify-center min-h-96",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading wallet analytics..."})]})}):(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto space-y-4 sm:space-y-8 animate-fade-in-up",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Credits & Wallets"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Analytics on team wallet balances and credit usage"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg",children:[(0,t.jsx)(n,{className:"w-4 h-4 text-primary"}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-foreground",children:[e.length," teams"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",children:[(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Teams with Balance"}),(0,t.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-accent mt-2",children:y.teamsWithBalance}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Active teams"})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",style:{animationDelay:"0.1s"},children:[(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Total Balance"}),(0,t.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-accent mt-2",children:["$",(y.totalBalance/100).toFixed(2)]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all teams"})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",style:{animationDelay:"0.2s"},children:[(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Average Balance"}),(0,t.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-accent mt-2",children:["$",(y.averageBalance/100).toFixed(2)]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Per team"})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 animate-fade-in-up hover:shadow-lg transition-all duration-300",style:{animationDelay:"0.3s"},children:[(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground font-medium",children:"Active Teams"}),(0,t.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-400 mt-2",children:y.activeTeams}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"High balance"})]})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg animate-fade-in-up",style:{animationDelay:"0.4s"},children:[(0,t.jsxs)("div",{className:"p-4 sm:p-6 border-b border-border flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Zap,{className:"w-4 h-4 sm:w-5 sm:h-5 text-accent"}),(0,t.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-card-foreground",children:"Teams with Existing Balances"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-xs sm:text-sm text-muted-foreground",children:"Sort:"}),(0,t.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-2 py-1 bg-input border border-border rounded text-xs sm:text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,t.jsx)("option",{value:"balance",children:"Balance (High to Low)"}),(0,t.jsx)("option",{value:"name",children:"Team Name (A-Z)"})]})]})]}),0===e.length?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(i.AlertCircle,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-1",children:"No teams with existing balances"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Teams will appear here once they have credits"})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Team Name"}),(0,t.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Balance"}),(0,t.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Status"}),(0,t.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-muted-foreground",children:"Percentage"})]})}),(0,t.jsx)("tbody",{children:e.map((e,s)=>{let a=e.balance/y.totalBalance*100||0,r="active"===e.status?"text-green-400 bg-green-500/10":"low"===e.status?"text-yellow-400 bg-yellow-500/10":"text-red-400 bg-red-500/10",i="active"===e.status?"Active":"low"===e.status?"Low":"Empty";return(0,t.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,t.jsx)("span",{className:"font-medium text-foreground",children:e.teamName})}),(0,t.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,t.jsxs)("span",{className:"font-semibold text-accent",children:["$",(e.balance/100).toFixed(2)]})}),(0,t.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:i})}),(0,t.jsx)("td",{className:"px-4 sm:px-6 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-20 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-accent",style:{width:`${Math.min(a,100)}%`}})}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[a.toFixed(1),"%"]})]})})]},s)})})]})})]}),e.length>0&&(0,t.jsxs)("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-4 flex gap-3 animate-fade-in-up",style:{animationDelay:"0.5s"},children:[(0,t.jsx)(r.TrendingUp,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground mb-1",children:"Wallet Analytics"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This page shows all teams with existing credit balances. Teams are sorted by balance to help you identify your most active or well-funded teams. Use this data for capacity planning and resource allocation."})]})]})]})}e.s(["default",()=>c],83159)}]);