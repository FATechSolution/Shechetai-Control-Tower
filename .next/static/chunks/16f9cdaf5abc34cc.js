(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let i=(...e)=>e.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:n="",children:c,iconNode:d,...o},m)=>(0,t.createElement)("svg",{ref:m,...s,width:a,height:a,stroke:e,strokeWidth:l?24*Number(r)/Number(a):r,className:i("lucide",n),...o},[...d.map(([e,i])=>(0,t.createElement)(e,i)),...Array.isArray(c)?c:[c]])),r=(e,s)=>{let r=(0,t.forwardRef)(({className:r,...l},n)=>(0,t.createElement)(a,{ref:n,iconNode:s,className:i(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...l}));return r.displayName=`${e}`,r};e.s(["default",()=>r],75254)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},53533,e=>{"use strict";var t=e.i(43476),i=e.i(71645),s=e.i(18566),a=e.i(70065),r=e.i(67881),l=e.i(81947),n=e.i(31278),c=e.i(69638);let d=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function o(){let e=(0,s.useParams)(),o=(0,s.useRouter)(),m=e.inviteId,[h,u]=(0,i.useState)(null),[x,f]=(0,i.useState)(!0),[p,j]=(0,i.useState)(!1),[v,N]=(0,i.useState)(null),[w,C]=(0,i.useState)(!1);async function g(){try{f(!0),N(null);let e=await fetch(`/api/invites/${m}`);if(!e.ok){if(404===e.status)throw Error("Invite not found or has expired");throw Error("Failed to load invite")}let t=await e.json(),i=t.data||t;if("pending"!==i.status){N("This invite has already been used or cancelled"),f(!1);return}if(new Date(i.expiresAt)<new Date){N("This invite has expired"),f(!1);return}try{let e=await fetch(`/api/teams/${i.teamId}`);if(e.ok){let t=await e.json();i.teamName=(t.data||t).name}}catch(e){console.error("Failed to fetch team details:",e)}u(i)}catch(e){N(e.message||"Failed to load invite")}finally{f(!1)}}async function y(){try{j(!0),N(null);let e=await fetch(`/api/invites/${m}/accept`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to accept invite")}C(!0),setTimeout(()=>{o.push("/dashboard")},2e3)}catch(e){N(e.message||"Failed to accept invite")}finally{j(!1)}}async function k(){try{if(j(!0),N(null),!(await fetch(`/api/invites/${m}/decline`,{method:"POST"})).ok)throw Error("Failed to decline invite");o.push("/")}catch(e){N(e.message||"Failed to decline invite"),j(!1)}}return((0,i.useEffect)(()=>{g()},[m]),x)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading invite..."})]})}):v&&!h?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,t.jsxs)(a.Card,{className:"max-w-md w-full",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d,{className:"h-6 w-6 text-destructive"}),(0,t.jsx)(a.CardTitle,{children:"Invalid Invite"})]})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:v}),(0,t.jsx)(r.Button,{onClick:()=>o.push("/"),className:"w-full",children:"Go to Home"})]})]})}):w?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,t.jsxs)(a.Card,{className:"max-w-md w-full",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.CheckCircle,{className:"h-6 w-6 text-green-500"}),(0,t.jsx)(a.CardTitle,{children:"Invite Accepted!"})]})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"You've successfully joined the team. Redirecting to dashboard..."})})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,t.jsxs)(a.Card,{className:"max-w-md w-full",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Team Invitation"}),(0,t.jsx)(a.CardDescription,{children:"You've been invited to join a team"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[v&&(0,t.jsx)(l.Alert,{variant:"destructive",children:(0,t.jsx)(l.AlertDescription,{children:v})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Team"}),(0,t.jsx)("p",{className:"font-medium",children:h?.teamName||"Loading..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Role"}),(0,t.jsx)("p",{className:"font-medium capitalize",children:h?.role})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Email"}),(0,t.jsx)("p",{className:"font-medium",children:h?.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Expires"}),(0,t.jsx)("p",{className:"font-medium",children:h?new Date(h.expiresAt).toLocaleDateString():"-"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(r.Button,{onClick:y,disabled:p,className:"flex-1",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Accepting..."]}):"Accept Invitation"}),(0,t.jsx)(r.Button,{onClick:k,disabled:p,variant:"outline",className:"flex-1",children:"Decline"})]})]})]})})}e.s(["default",()=>o],53533)}]);